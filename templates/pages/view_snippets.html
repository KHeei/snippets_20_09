{% extends 'base.html' %}

{% block content %}
<!-- Begin page content -->
<div class="row">
    <div class="col-4 offset-2" style="margin-left:5%">
        Список сниппетов:
        <table class="table table-striped" style="width:1050px;">
            <thead class="thead-dark">
            <tr>
                <th scope="col"></th>
                <th scope="col">ID</th>
                <th scope="col">Название</th>
                <th scope="col">Язык<br>
                    <form action="" method="GET">
                        <select name="lang" onchange="form.submit()">
                            <option value="all">
                                --------
                            </option>
                            {% for lang in langs %}
                            <option {% if selected == lang.0 %} selected {% endif %} value="{{lang.0}}">
                                {{lang.1}}
                            </option>
                            {% endfor %}
                        </select>
                    </form>
                </th>
                <th scope="col">Snippet</th>
                <th scope="col">Дата создания</th>
                <th scope="col">Автор</th>
                <th scope="col">Is private</th>
                {% if request.user.is_authenticated %}
                <th scope="col"></th>
                {% endif %}
            </tr>
            </thead>
            <tbody>
            {% load my_tags %}
            {% for i in snippets %}
            <tr>
                <td><a href="{% url 'Page' i.id %}">
                    <i class="far fa-eye" style="color:blue"></i>
                </a>
                </td>
                <td>{{i.id}}</td>
                <td>{% if request.user == i.author %} <a href="{% url 'Edit' i.id %}"><i
                        class="far fa-edit"></i></a>{% endif %}
                    {{i.name}}
                </td>
                <td>{{i.lang}}</td>
                {% autoescape off %}
                <td>{{i.code|repl}}</td>
                {% endautoescape %}
                <td>{{i.creation_date|date:"Y-m-d"}}</td>
                <td>{{i.author.username|default:"Отсутвует"}}</td>
                <td>{% if i.is_private %}<i style="color:red" class="fas fa-lock"></i>
                    {% else %}
                    <i style="color:green" class="fas fa-lock-open"></i>
                    {% endif %}
                </td>
                {% if request.user == i.author %}
                <td>
                    <a href="{% url 'Delete' i.id %}">
                        <i class="fas fa-ban" style="color:red"></i>
                    </a>
                </td>
                {% elif request.user.is_authenticated %}
                <td></td>
                {% endif %}
            </tr>

            {% endfor %}
            <tbody>
        </table>


    </div>
</div>
{% endblock %}
